---
title: 高并发名词
categories: 
- 分布式
---

**限流**

它在本质上，是设置一个资源数量上限，超出这个上限的请求，将被缓冲，或者直接失败。

对于高并发场景下的限流来说，它有特殊的含义：它主要是用来保护底层资源的。

如果你想要调用某些服务，你需要首先获取调用它的许可，限流一般由服务提供方来提供，对调用方能够做事的能力进行限制。

比如，某个服务为A、B、C都提供了服务，但根据提前申请的流量预估，限制A服务的请求为1000/秒、B服务2000/秒，C服务1w/秒。

在同一时刻，某些客户端可能会出现被拒绝的请求，而某些客户端能够正常运行，限流被看作是服务端的自我保护能力。

**熔断**

比如：A→B→C互相依次调用，但C项目很可能出现问题（流量过大或者报错等），就会引发线程一直进行等待，导致拖垮整个链路层，线程资源耗尽。

意如其名，熔断就像是保险丝，超过负载了保险丝就烧掉了。

当然，当后端服务缓和的时候，我们还可以再把它接上，熔断功能一般由**调用端**提供，用在不太重要的旁路请求上，避免这些不重要的服务因为异常或者超时，影响正常的、重要的业务逻辑。

在实现上，我们可以把熔断看作是一种代理模式：当熔断打开的时候，服务将暂停对其保护资源的访问，并返回固定的或者不产生远程调用的默认结果。

**降级**

降级一般考虑的是分布式系统的整体性，从源头上切断流量的来源。

比如在双11的时候，为了保证交易系统，将会暂停一些不重要的服务，以免产生资源争占。

服务降级有人工参与，人为使得某些服务不可用，多属于一种业务降级方式。

比如，一个电商系统，在极端情况下，只需要把商品显示出来，把商品卖出去就行。

其他一些支撑性的系统，比如评论、推荐等，都可以临时关掉。在物理部署和调用关系上，就要考虑这些情况。

**预热**

一个刚刚启动的JVM进程，由于字节码并未被JIT编译器优化，在刚启动的时候，所有接口的响应时间都比较慢。

如果调用它的负载均衡组件，并没有考虑这种刚启动的情况，1/n的流量被正常路由到这个节点，就很容易出现问题。

所以，我们希望负载均衡组件，能够依据JVM进程的启动时间，动态的慢慢加量，进行服务预热，直到达到正常流量水平。

**背压**

> 如何动态的修改限流的值？

这就需要一套机制：调用方需要知道被调用方的处理能力，也就是被调用方需要拥有反馈的能力。

> 背压，英文Back Pressure，其实是一种智能化的限流，指的是一种策略。

背压思想，被请求方不会直接将请求端的流量直接丢掉，而是不断的反馈自己的处理能力。

请求端根据这些反馈，实时的调整自己的发送频率，比较典型的场景，就是TCP/IP中使用**滑动窗口**来进行流量控制。

背压，让系统更稳定，利用率也更高，它本身拥有更高的弹性和智能。
---
title: 错误处理
categories: 
- 编程语言
- Go基础
---

**Error**

Go中的error 就是一个接口，提供一个普通的值。

我们可以用`errors.New()` 方法获取一个error对象。实际上它返回的是一个对象的指针，这个对象里放了一个字符串，这个字符串就是错误的提示。Go在此处使用指针而不是直接使用字符串，这是为了防止创建2个内容相同的error导致的意外判等情况。

虽然Go需要在代码的各个地方判断`err≠nil`，稍显麻烦，但是这可以帮助我们快速定位到问题。

**panic**

对于那些表示不可恢复的程序错误，例如索引越界，可以直接引发panic，终止程序运行。对于其他的业务错误，我们还是期望使用 error 来进行判定。

**Wrap**

errors包的Wrap函数可以通过包裹error，以返回一个像panic一样的栈结构信息，这可以让我们更方便的查出具体的错误出处。既然打印了完整的栈结构，我们也就不需要在每一层都打印error了。

但需要注意的是，Warp应该在业务的应用上使用，而不是在会有很多项目调用的基础库上使用，因为其他项目可能使用其他的日志库，导致日志打印的冗余。
---
title: 四线复盘法
categories: 
- 专栏学习
- 大厂晋升指南
---

**问题复盘**

技术人员主要参与的是线上问题复盘，比如业务或者系统出现了线上问题，在问题解决之后往往就会组织复盘。

**四线复盘法**

问题复盘的内容涵盖事实、分析、定责和改进4 个部分，一次成功的问题复盘需要达成以下 4 个目标：

- 讲清楚事实：事实是复盘的基础，如果连事实都没有讲清楚就开始分析、定责和改进。
- 全面且深入地分析：首先需要保证没有遗漏问题，其次需要深入分析问题根因，否则以后问题还是会以其他方式反复出现。
- 得出让各方心服口服的定责结论：需要有明确的定责标准，避免拍脑袋定责，或者按照级别和关系来定责。
- 制定可以落地的改进措施：避免提出一些虚头巴脑的措施，看起来高大上，实际上却不知道怎么落地，后续也无法跟踪。

四线复盘法，就是通过时间线、问题链、责任链和改进线这 4 条不同的线索来展开复盘，从而实现事实、分析、定责和改进这 4 个部分的目标。

**针对每条线索逐一讲解说明。**

> 第一条线：时间线

我们要明确时间线，也就是问题发生的经过，包括问题发现、问题处理过程中采取的各种关键措施、问题恢复的时间和问题影响的结果等。

其中，时间信息非常关键，因为它能够反映出问题发现速度、各项措施执行时间和团队响应效率等指标。

比如，运维重启 30 台机器花了 1 小时，通常情况下这种处理效率肯定是有问题的。

> 第二条线：问题链

通常情况下，一个问题往往不是单一原因导致的，而是多个原因“碰巧”组合在一起所导致的，所以分析整个问题的传导路径，才能全面地了解产生问题的过程。

同时，针对单个问题的分析也不能浅尝辄止，找到根本原因，这样才能为后续制定改进措施提供有效的指导。

问题链的路径逻辑有两类：业务流程和项目流程。

- 业务流程是指，端到端的业务处理的过程，分析的对象是各个关联的系统。
- 项目流程是指，端到端的项目开发的过程，分析的对象是项目各个阶段相关的人员，比如开发、测试、产品和运维等。

我们一般先采用业务流程的逻辑将问题定位到单个系统，然后再针对单个系统采用项目流程的方式将问题定位到具体的人或者流程中的某个步骤。

> 第三条线：责任链

我们需要结合时间线中问题影响的结果、公司的故障定级标准和问题链的分析，最终确定哪些团队或个人应该承担责任，分别承担多大的责任，接受什么样的处罚。

之所以叫责任链，是因为一个问题的发生往往是整个流程上多个环节相关的人处理有问题，才会导致最终问题的发生。

比如开发人员引入 bug，测试人员遗漏了测试，产品人员没有验收到，最终才会在上线后发现问题，这个环节中只要有一个环节把握住了，问题就不会发生。

通常情况下，制定明确的定责标准有利于尽量减少争议，常见的标准包括以下 4 条：

- 违反公司规章 / 制度 / 流程的承担主责：比如公司规定必须要有灰度策略才能升级，某业务版本直接全量升级导致发生问题。
- 出现重大纰漏的承担主责：比如测试时漏测了某个常见的业务场景，导致上线后发生问题，测试承担主责，产品承担主责（因为上线前验收阶段没有发现问题），开发反而不一定承担责任（看具体的公司和团队要求）。
- 问题源头承担主责：比如 A 系统磁盘故障导致接口响应很慢且问题持续很长时间，从而进一步导致 B 系统对外响应也超时，这种情况下 A 系统应该承担主责，B 系统承担次责。
- 问题放大者承担主责：比如 A 系统磁盘故障导致接口响应很慢但只持续了几分钟，结果诱发了 B 系统的设计缺陷，导致 B 系统瘫痪超过 1 小时，这种情况下 B 系统应该承担主责。

> 第四条线：改进线

为了制定可以落地的改进措施，我们要明确改进线，也就是问题的改进计划，包括具体措施、改进责任人和时间节点等。

改进计划的思路来源于两个方面：

- 时间线和问题链，通过时间线找到问题处理过程中不合理和可以优化的地方；
- 通过问题链找到具体需要解决的问题。

具体措施可以是流程上的调整（增加或删除流程步骤），技术上的手段（增加功能、优化系统）和团队方面的措施（学习、培训、奖惩机制）等。

无论采取什么措施，都要求能够落地执行。比如“提升团队质量意识”这种比较虚的措施，应该细化为“团队参加公司的质量规范学习和考试”“推行 Code Review”这种具体的措施。

**案例：线上商城**

假设我们做了一个简单的线上商城，架构如下图所示：

<img src="https://img-blog.csdnimg.cn/c85129f9a5f6469e8c8865d3473a4366.png" alt="img" style="zoom:25%;" />

某次线上故障导致用户下单后无法支付，我们按照四线复盘法来来复盘这个问题。

> 时间线

问题产生、处理和收尾的整个过程，梳理了时间线：

<img src="https://img-blog.csdnimg.cn/9ee5a46bee2b40e3b78d5209ef3a6596.png" alt="img" style="zoom:25%;" />

> 问题链

先按照业务流程来分析问题链，由于系统架构和这次问题都比较简单，所以问题链只涉及风控服务和支付服务：

![img](https://img-blog.csdnimg.cn/0d6f2ff7bd6043c6a72ae7c6cc64aba1.png)

针对风控服务的问题，我们再按照项目流程来分析问题链：

![img](https://img-blog.csdnimg.cn/ec845fc254cb4b2d81ead950a2bd0067.png)

> 责任链

根据时间线中的影响结果，这次问题导致的损失是 10000 元；

根据公司故障定级标准，属于轻微级别，惩罚措施是贡献活动经费；结合问题链和定责标准，我们得到了最终的责任链：

![img](https://img-blog.csdnimg.cn/50331c3333194559941ab9e50f6d5522.png)

> 改进线

我们分析了时间线中的步骤，针对两个可以改进的地方制定了改进措施：

<img src="https://img-blog.csdnimg.cn/5fd231ed2a0b4d12804b604e65d3051b.png" alt="img" style="zoom:25%;" />

然后，我们又分析了问题链中的问题，针对另外两个可以改进的地方制定了改进措施：

<img src="https://img-blog.csdnimg.cn/23f2552d53e74ffe89dcb13b92448d74.png" alt="img" style="zoom:25%;" />
---
title: 负载均衡
categories: 
- 深入理解RPC框架原理
---

RPC的负载均衡完全由RPC框架自身实现，RPC的服务调用者会与注册中心下发的所有服务节点建立长连接，在每次发起RPC调用时，服务调用者都会通过配置的负载均衡插件，自主选择一个服务节点，发起RPC调用请求。

<img src="https://img-blog.csdnimg.cn/4f1a16b9280b45b0a397403664ba3f08.png" style="zoom:25%;" />

**如何设计自适应的负载均衡？**

只要调用者知道每个服务节点处理请求的能力，再根据服务处理节点处理请求的能力来判断要打给它多少流量就可以了？

当一个服务节点负载过高或响应过慢时，就少给它发送请求，反之则多给它发送请求。

<img src="https://img-blog.csdnimg.cn/9d44836cb0a54b0dbeef7b2a634077b4.png" style="zoom:25%;" />
---
title: 定位问题
categories: 
- 深入理解RPC框架原理
---

**借助合理封装的异常信息**

在RPC框架打印的异常信息中，是包括定位异常所需要的异常信息的，比如是哪类异常引起的问题（如序列化问题或网络超时问题），是调用端还是服务端出现的异常，调用端与服务端的IP是什么，以及服务接口与服务分组都是什么等等

**借助分布式链路跟踪**

> Trace与Span

Trace就是代表整个链路，每次分布式都会产生一个Trace，每个Trace都有它的唯一标识即TraceId，在分布式链路跟踪系统中，就是通过TraceId来区分每个Trace的。

Span就是代表了整个链路中的一段链路，也就是说Trace是由多个Span组成的。

在一个Trace下，每个Span也都有它的唯一标识SpanId，而Span是存在父子关系的。

在A->B->C->D的情况下，在整个调用链中，正常情况下会产生3个Span，分别是Span1（A->B）、Span2（B->C）、Span3（C->D），这时Span3的父Span就是Span2，而Span2的父Span就是Span1。

**Trace与Span的关系如下图所示：**

![](https://img-blog.csdnimg.cn/379b980312ff41ae85b0b26e79b00755.png)
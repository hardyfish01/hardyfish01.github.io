---
title: VIM编辑器
categories: 
- 鸟哥的Linux私房菜
---

vi / vim 是Unix / Linux上最常用的文本编辑器而且功能非常强大。

**VIM工作模式**

![](https://img-blog.csdnimg.cn/a1fb02cd3caa425a97cbf597caee3ee0.png)

**新建文件**

```
vim + 文件名：新建之后，文件打开，光标定位在最后一行
vim +3 文件名：光标定位在第3行
vim +100 文件名：如果这个数值> 文件内容的最大行数，则光标定位在最后一行
vim +/字符串 文件名：光标定位在第1次出现这个字符串的 那一行，定位在那一行
vim aa bb cc：多次新建或打开多个文件，它默认打开aa 文件
切换到底行模式输入:n，则能切换到下一个文件，输入:N，或是输入:prev，会切换到前一个文件
```

**快捷键**

```
ctrl+h 删除上一个字符，ctrl+w删除上一个单词，ctrl+u删除当前行

ctrl+c 强制终止当前命令，ctrl+l 清屏 同命令clear，ctrl+a 光标移动到命令行首

ctrl+e 光标移动到命令行尾，ctrl+z 把命令放入后台，ctrl+r 在历史命令中搜索上下滚动

ctrl+u，ctrl+f上下翻页
```

**插入命令**

| 命令           | 作用                     |
| -------------- | ------------------------ |
| a              | 在光标后附加文本         |
| A（shift + a） | 在本行行末附加文本  行尾 |
| i              | 在光标前插入文本         |
| I(shift+i)     | 在本行开始插入文本 行首  |
| o              | 在光标下插入新行         |
| O(shift+o)     | 在光标上插入新行         |

**定位命令**

| 命令      | 作用               |
| --------- | ------------------ |
| :set nu   | 设置行号           |
| :set nonu | 取消行号           |
| gg        | 到第一行到最后一行 |
| G         | 到最后一行         |
| :n        | 到第n行            |

```
0移动到行首第一个字符，^移动到第一个非空白字符
$移动到行尾，g_移动到行尾非空白字符
```

**保存和退出命令**

| 命令            | 作用                                             |
| --------------- | ------------------------------------------------ |
| :w              | 保存修改                                         |
| :w new_filename | 另存为指定文件                                   |
| :w >> a.txt     | 内容追加到a.txt文件中 文件需存在                 |
| :wq             | 保存修改并退出                                   |
| shift+zz（ZZ）  | 快捷键，保存修改并退出                           |
| :q!             | 不保存修改退出                                   |
| :wq!            | 保存修改并退出（文件所有者可忽略文件的只读属性） |

**删除命令**

| 命令    | 作用                                           |
| ------- | ---------------------------------------------- |
| x       | 删除光标所在处字符  nx 删除光标所在处后n个字符 |
| dd      | 删除光标所在行，ndd删除n行                     |
| :n1,n2d | 删除指定范围的行（eg :1,3d  删除了123这三行）  |
| dG      | 删除光标所在行到末尾的内容                     |
| D       | 删除从光标所在处到行尾                         |

**复制和剪切命令**

| 命令    | 作用                          |
| ------- | ----------------------------- |
| yy、Y   | 复制当前行                    |
| nyy、nY | 复制当前行以下n行             |
| dd      | 剪切当前行                    |
| ndd     | 剪切当前行以下n行             |
| p、P    | 粘贴在当前光标所在行下 或行上 |

**替换和取消命令**

| 命令         | 作用                                |
| ------------ | ----------------------------------- |
| r            | 取代光标所在处字符                  |
| R(shift + r) | 从光标所在处开始替换字符，按Esc结束 |
| u            | undo,取消上一步操作                 |
| ctrl+r       | redo,返回到undo之前                 |

**搜索和替换命令**

| 命令              | 作用                                         |
| ----------------- | -------------------------------------------- |
| /string           | 向后搜索指定字符串  搜索时忽略大小写 :set ic |
| ?string           | 向前搜索指定字符串                           |
| N                 | 搜索字符串的下一个出现位置,与搜索顺序相同    |
| N（Shift + n）    | 搜索字符串的上一个出现位置,与搜索顺序相反    |
| :%s/old/new/g     | 全文替换指定字符串                           |
| :n1,n2s/old/new/g | 在一定范围内替换指定字符串                   |

```
:[rang] s[ubstitute]/{pattern}/{string}/[flags]

rang：表示范围，比如：10,20 表示 10-20 行，% 表示全部。
pattern：表示要替换的模式（支持：正则）。
string：替换后的文本。
flags：替换标志位。g(global) 表示全局范围内执行；c(confirm) 表示确认，可以确认或拒绝修改；n(number) 报告匹配到的次数而不替换。
% 指全文，s 指开始，g 指全局替换

:% s/self/this/g
:1,6 s/self/this/g

单词精确匹配，可使用 < 和 >，如：:% s/\<hello\>/world/g，将所有的 hello 替换为 world
```
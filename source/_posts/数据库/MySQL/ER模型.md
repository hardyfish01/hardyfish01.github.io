---
title: ER模型
categories: 
- 数据库
- MySQL
---

ER模型也叫作实体关系模型，是用来描述现实生活中客观存在的事物、事物的属性，以及事物之间关系的一种数据模型。

在开发基于数据库的信息系统的设计阶段，通常用ER模型来描述信息需求和信息特性，帮我们理清业务逻辑，从而设计出优秀的数据库。

**在ER模型里面，有三个要素，分别是实体、属性和关系**。

- 实体，可以看做是数据对象，往往对应于现实生活中的真实存在的个体。比如，连锁超市就可以看做一个实体。
- 在ER模型中，用矩形来表示。实体分为两类，分别是**强实体和弱实体。**强实体是指不依赖于其他实体的实体；弱实体是指对另一个实体有很强的依赖关系的实体。
- 属性，则是指实体的特性。比如超市的地址、联系电话、员工数等。在ER模型中用椭圆形来表示。
- 关系，则是指实体之间的联系。比如超市把商品卖给顾客，就是一种超市与顾客之间的联系。在ER模型中用菱形来表示。

> 需要注意的是，有的时候，实体和属性不容易区分。
>
> 比如刚刚商品信息表中的商品的单位，到底是实体还是属性呢？

如果从进货的角度出发，单位是商品的属性，但是从超市信息系统的整体出发，单位可以看做一个实体。

**如何区分实体和属性呢？**

我们要从系统整体的角度出发去看，**可以独立存在的是实体，不可再分的是属性**。

* 也就是说，属性不需要进一步描述，不能包含其他属性。

在ER模型的3个要素中，关系又可以分为3种类型，分别是**1对1、1对多和多对多**。

1. 1对1：指实体之间的关系是一一对应的，比如个人与身份证信息之间的关系就是1对1的关系。一个人只能有一个身份证信息，一个身份证信息也只属于一个人。
2. 1对多：指一边的实体通过关系，可以对应多个另外一边的实体。相反，另外一边的实体通过这个关系，则只能对应唯一的一边的实体。比如超市与超市里的收款机之间的从属关系，超市可以拥有多台收款机，但是每一条收款机只能从属于一个超市。
3. 多对多：指关系两边的实体都可以通过关系对应多个对方的实体。比如在进货模块中，供货商与超市之间的关系就是多对多的关系，一个供货商可以给多个超市供货，一个超市也可以从多个供货商那里采购商品。

给超市业务创建ER模型，如下图所示：

<img src="https://img-blog.csdnimg.cn/7355718ee89e4afe8a4d3969a933d121.png" style="zoom:25%;" />

在这个图中，供货商和超市之间的供货关系，两边的数字都不是1，表示多对多的关系。

* 同样，超市和顾客之间的零售关系，也是多对多的关系。

这个ER模型，包括了3个实体之间的2种关系：

1. 超市从供货商那里采购商品；
2. 超市把商品卖给顾客。

**ER模型的细化**

超市业务模型，包括了两个模块，分别是进货模块和销售模块。

<img src="https://img-blog.csdnimg.cn/ee25c201ebaf43658696262b7708aab1.png" style="zoom:25%;" />

**如何把ER模型图转换成数据表？**

**转换的原则**

1. 一个实体通常转换成一个数据表；
2. 一个多对多的关系，通常也转换成一个数据表；
3. 一个1对1，或者1对多的关系，往往通过表的外键来表达，而不是设计一个新的数据表；
4. 属性转换成表的字段。
---
title: 领域服务
categories: 
- 实现领域驱动设计
---

**什么是领域服务**

不要将领域服务与应用服务混淆:

* 应用服务并不会处理业务逻辑

* 但领域服务恰恰是处理业务逻辑，应用服务是领域模型很自然的客户，也是领域服务的客户。

**何时应该使用领域服务**

当领域中的某个操作或转换过程不是实体或值对象的职责时，此时便应该将该操作放在一个单独的接口，即领域服务。

请确保该领域服务和通用语言是一致的；并且保证它是无状态的。

通常领域模型主要关注特定于某个领域的业务。同样，领域服务也具有相似特点。

由于领域服务有可能在单个原子操作中处理多个领域对象，这将增加领域服务的复杂性。

有时，当与另一个限界上下文交互时，领域服务的确需要进行远程操作，但此时重点并非将领域服务作为一个服务提供方，而是将其作为RPC的客户端。

那么何时一个操作不属于实体或值对象？即何时可使用领域服务：

* 执行一个显著的业务操作过程

* 对领域对象进行转换

* 以多个领域对象作为输入进行计算，产生一个值对象结果

计算过程应该具有显著的业务操作过程。这也是领域服务很常见的应用场景，它可能需要多个聚合作为输入。

当一个方法不便放在实体或值对象，使用领域服务便是最佳的解决方案。

> 比如：账户转账场景，涉及到两个不同的Account实体，再比如社区的敏感词过滤场景，帖子可以用，评论亦可以用，因此可以抽离到ContentFilter中完成。

**过度使用领域服务将导致贫血领域模型，即所有业务逻辑都位于领域服务中，而非实体和值对象**。

**建模领域服务**

> 独立接口是否有必要

很多情况下，独立接口时没有必要的。我们只需创建一个实现类即可，其命名与领域服务相同（名称来自通用语言）。

采用XXXServiceImpl、DefaultXXXService命名实现类，往往意味者不需要接口

